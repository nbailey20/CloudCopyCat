#!/usr/bin/python3

import zipfile, os

from helpers.arguments.parse import parse_args
from helpers.arguments.validate import args_are_valid
import helpers.resource_handler as resource_handler

def build_zips():
    cwd = os.getcwd()
    os.chdir(os.path.join(cwd, "resources", "lambda"))
    with zipfile.ZipFile("CloudCopyCat-Lambda-Function.zip", "w") as z:
        z.write("CloudCopyCat-Lambda-Function.py")
    os.chdir(cwd)
    return


def main():
    args = parse_args()
    if not args_are_valid(args):
        return
    
    # print("Building Lambda zips...")
    # build_zips()

    
    print("Starting CloudCopyCat")
    resource_handler.run(args)
    print("Done")



if __name__ == "__main__":
    main()